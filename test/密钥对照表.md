# ğŸ”‘ å¯†é’¥å¯¹ç…§ä¸éªŒè¯æŒ‡å—

## ğŸ“Š å¯†é’¥å¯¹åº”å…³ç³»ï¼ˆå¿…é¡»è®°ä½ï¼ï¼‰

### å½“å‰ç³»ç»Ÿçš„å¯†é’¥é…å¯¹

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ  æ­£ç¡®çš„å¯†é’¥å¯¹ (é…å¯¹ä½¿ç”¨)    â”ƒ
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
â”ƒ                             â”ƒ
â”ƒ  ç§é’¥: new_private.pem     â”ƒ
â”ƒ        â†• (é…å¯¹)            â”ƒ
â”ƒ  å…¬é’¥: new_public_pem.pem  â”ƒ
â”ƒ                             â”ƒ
â”ƒ  âœ… æºä»£ç ä¸­ä½¿ç”¨çš„å…¬é’¥:     â”ƒ
â”ƒ     internal/license/       â”ƒ
â”ƒ     license.go:881         â”ƒ
â”ƒ     const _dba = "..."     â”ƒ
â”ƒ                             â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ  é”™è¯¯çš„å¯†é’¥å¯¹ (ä¸è¦ä½¿ç”¨!)   â”ƒ
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
â”ƒ                             â”ƒ
â”ƒ  ç§é’¥: my_private.pem      â”ƒ
â”ƒ        â†• (é…å¯¹)            â”ƒ
â”ƒ  å…¬é’¥: my_public.pem       â”ƒ
â”ƒ                             â”ƒ
â”ƒ  âŒ è¿™å¯¹å¯†é’¥ä¸æºä»£ç ä¸åŒ¹é…! â”ƒ
â”ƒ  âŒ ä½¿ç”¨å®ƒä¼šå¯¼è‡´éªŒè¯å¤±è´¥!   â”ƒ
â”ƒ                             â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

---

## ğŸ” å¦‚ä½•éªŒè¯å¯†é’¥æ˜¯å¦åŒ¹é…

### æ–¹æ³• 1: æŸ¥çœ‹å…¬é’¥æŒ‡çº¹

```bash
cd /workspaces/unioffice/test

# è®¡ç®— new_public_pem.pem çš„æŒ‡çº¹
openssl pkey -pubin -in new_public_pem.pem -text -noout | grep -A 2 "Public-Key"

# è®¡ç®— my_public.pem çš„æŒ‡çº¹
openssl pkey -pubin -in my_public.pem -text -noout | grep -A 2 "Public-Key"

# å¦‚æœè¾“å‡ºä¸åŒï¼Œè¯´æ˜æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥å¯¹
```

### æ–¹æ³• 2: ç”Ÿæˆæµ‹è¯•è®¸å¯è¯éªŒè¯

```bash
cd /workspaces/unioffice/test

# ä½¿ç”¨ new_private.pem ç”Ÿæˆè®¸å¯è¯
go run license_gen.go \
  -customer "KeyTest" \
  -output test_new.key \
  -privkey new_private.pem

# ä½¿ç”¨ my_private.pem ç”Ÿæˆè®¸å¯è¯
go run license_gen.go \
  -customer "KeyTest" \
  -output test_my.key \
  -privkey my_private.pem

# éªŒè¯ test_new.keyï¼ˆåº”è¯¥æˆåŠŸï¼‰
go run verify_license.go -license test_new.key -customer "KeyTest"
# é¢„æœŸè¾“å‡º: âœ… è®¸å¯è¯éªŒè¯æˆåŠŸ!

# éªŒè¯ test_my.keyï¼ˆåº”è¯¥å¤±è´¥ï¼‰
go run verify_license.go -license test_my.key -customer "KeyTest"
# é¢„æœŸè¾“å‡º: âŒ è®¸å¯è¯éªŒè¯å¤±è´¥: crypto/rsa: verification error
```

### æ–¹æ³• 3: å¯¹æ¯”å…¬é’¥å†…å®¹

```bash
cd /workspaces/unioffice/test

# æ˜¾ç¤ºä¸¤ä¸ªå…¬é’¥çš„å†…å®¹
echo "=== new_public_pem.pem ==="
cat new_public_pem.pem

echo ""
echo "=== my_public.pem ==="
cat my_public.pem

# å¦‚æœå†…å®¹ä¸åŒï¼Œè¯´æ˜æ˜¯ä¸åŒçš„å¯†é’¥å¯¹
```

**å®é™…å¯¹æ¯”**ï¼ˆæ‚¨çš„ç³»ç»Ÿä¸­ï¼‰ï¼š

```
=== new_public_pem.pem ===
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqj42Lq6it+pk5+mRRHaH
RI7LWP5+K+pBah4Vx+kw06Vzpyvtx/KybEjVjQXdxCG4FQLC8PfKo23xWqg8a3j/
qLoaQGKi8Cf+6SWNeaK3n6vkBeJGn1HPeS2XH4WeJtKZp3uzZcIFL6MkERnejEI7
n7k0MkcG94mWhhvC0ptluuuP2m8bdc30tRAvt+JgfALZAHWW3/jNXNb9yBPqzJ9b
T2Q8vv6ynO7PvCsVGYxQg/1GBoKjFDMbeJJrUWtviEEAQGw7HcS4D0nYZpYwMYFV
mmM9Pqd/Y2uvmupfU3AzQVmhdDJyAEFgVXC6VaDR3If6fpBGqrJB7d4h7I2T+s5U
AQIDAQAB
-----END PUBLIC KEY-----

=== my_public.pem ===
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAru/gmHLGUKX40MSd4+dN
VWtFworiKBMN/0NFn4EZBEDWNlLMeydQ6+vgnWkml1uTxrT2+Sz+8CBDHI2JMxjF
8gGrhO16bMtNBd8of4Intia0jxXYamfC0OC7gYjNNJ0dt8+fdx1rG776mCi6wd45
xMkHMQsXKKNFZVP8Ui2TmgShxkDft9l5e2l1cBmeJWEP1MKv2kgyKDCSffxIVJ8s
+smsNLiNydcl+OT2vT4XeJCT97hVTJ278B2d0z4mIr6IhrDC8Di5lFfEyd2BHpBb
nXTTmwEYOt+mluAD7uZJ5ncS2F+GDmpaFVyGRy6EeOyYqvS4TcfCNm+sSVgy9fRk
qwIDAQAB
-----END PUBLIC KEY-----
```

**ç»“è®º**ï¼šè¿™ä¸¤ä¸ªå…¬é’¥**å®Œå…¨ä¸åŒ**ï¼Œæ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥å¯¹ï¼

---

## âš ï¸ ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤å¯¹å¯†é’¥ï¼Ÿ

### å†å²åŸå› 

åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯èƒ½ï¼š
1. ç¬¬ä¸€æ¬¡ç”Ÿæˆäº† `my_private.pem` å’Œ `my_public.pem`
2. åæ¥åˆç”Ÿæˆäº† `new_private.pem` å’Œ `new_public_pem.pem`
3. æœ€ç»ˆé€‰æ‹©å°† `new_public_pem.pem` æ”¾å…¥æºä»£ç 

### æ­£ç¡®åšæ³•

**åªä¿ç•™ä¸€å¯¹å¯†é’¥**ï¼Œé¿å…æ··æ·†ï¼š

```bash
cd /workspaces/unioffice/test

# å¤‡ä»½æ—§å¯†é’¥ï¼ˆå¦‚æœéœ€è¦ï¼‰
mkdir -p old_keys
mv my_private.pem old_keys/
mv my_public.pem old_keys/

# é‡å‘½åæ­£ç¡®çš„å¯†é’¥ï¼ˆå¯é€‰ï¼‰
mv new_private.pem private.pem
mv new_public_pem.pem public.pem

echo "âœ… ç°åœ¨åªæœ‰ä¸€å¯¹å¯†é’¥: private.pem å’Œ public.pem"
```

---

## ğŸ“ å®Œæ•´éªŒè¯æµç¨‹

### æ­¥éª¤ 1: ç¡®è®¤æºä»£ç ä¸­çš„å…¬é’¥

```bash
cd /workspaces/unioffice

# æå–æºä»£ç ä¸­çš„å…¬é’¥ï¼ˆUnicodeè½¬ä¹‰æ ¼å¼ï¼‰
grep "const _dba" internal/license/license.go | sed 's/const _dba = "//' | sed 's/"$//' > /tmp/source_key_unicode.txt

# è½¬æ¢ä¸ºå¯è¯»æ ¼å¼ï¼ˆéœ€è¦å°å·¥å…·ï¼‰
cat > /tmp/decode_unicode.go << 'EOF'
package main
import ("fmt"; "os"; "strconv"; "strings")
func main() {
    data, _ := os.ReadFile("/tmp/source_key_unicode.txt")
    s := string(data)
    s = strings.ReplaceAll(s, "\\u", "\\u")
    decoded, _ := strconv.Unquote(`"` + s + `"`)
    fmt.Print(decoded)
}
EOF

go run /tmp/decode_unicode.go > /tmp/source_key.pem

echo "æºä»£ç ä¸­çš„å…¬é’¥å·²æå–åˆ°: /tmp/source_key.pem"
cat /tmp/source_key.pem
```

### æ­¥éª¤ 2: å¯¹æ¯”å…¬é’¥

```bash
# å¯¹æ¯”æºä»£ç ä¸­çš„å…¬é’¥ä¸ new_public_pem.pem
diff -u /tmp/source_key.pem test/new_public_pem.pem

# å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜å®Œå…¨ä¸€è‡´ âœ…
# å¦‚æœæœ‰è¾“å‡ºï¼Œè¯´æ˜ä¸ä¸€è‡´ âŒ
```

### æ­¥éª¤ 3: éªŒè¯å¯†é’¥å¯¹

```bash
cd test

# ç”Ÿæˆæµ‹è¯•æ•°æ®
echo "test data" > /tmp/test.txt

# ä½¿ç”¨ç§é’¥ç­¾å
openssl dgst -sha512 -sign new_private.pem -out /tmp/test.sig /tmp/test.txt

# ä½¿ç”¨å…¬é’¥éªŒè¯
openssl dgst -sha512 -verify new_public_pem.pem -signature /tmp/test.sig /tmp/test.txt

# é¢„æœŸè¾“å‡º: Verified OK
```

---

## ğŸš¨ å¸¸è§é”™è¯¯åœºæ™¯

### åœºæ™¯ 1: é”™è¯¯çš„å¯†é’¥å¯¹

```bash
# âŒ é”™è¯¯ï¼šä½¿ç”¨ my_private.pem ç”Ÿæˆè®¸å¯è¯
go run license_gen.go -customer "User" -privkey my_private.pem

# ç»“æœï¼šç”ŸæˆæˆåŠŸï¼Œä½†éªŒè¯å¤±è´¥
go run verify_license.go -license license.key -customer "User"
# è¾“å‡º: âŒ crypto/rsa: verification error
```

**åŸå› **ï¼š
- ç”Ÿæˆæ—¶ç”¨çš„ç§é’¥ï¼š`my_private.pem`
- æºä»£ç ä¸­çš„å…¬é’¥ï¼š`new_public_pem.pem`ï¼ˆä¸ `new_private.pem` é…å¯¹ï¼‰
- å¯†é’¥å¯¹ä¸åŒ¹é… â†’ ç­¾åéªŒè¯å¤±è´¥

### åœºæ™¯ 2: æºä»£ç æœªåŒæ­¥

```bash
# åœ¨æœºå™¨ A ä¸Šä¿®æ”¹äº†æºä»£ç ï¼ˆä½¿ç”¨ new_public_pem.pemï¼‰
# åœ¨æœºå™¨ B ä¸Šä½¿ç”¨åŸå§‹æºä»£ç ï¼ˆä½¿ç”¨æ—§å…¬é’¥ï¼‰

# æœºå™¨ A ç”Ÿæˆè®¸å¯è¯
go run license_gen.go -customer "User" -privkey new_private.pem

# æœºå™¨ B éªŒè¯è®¸å¯è¯
go run verify_license.go -license license.key -customer "User"
# è¾“å‡º: âŒ crypto/rsa: verification error
```

**åŸå› **ï¼š
- æœºå™¨ B çš„æºä»£ç æ²¡æœ‰æ›´æ–°
- æœºå™¨ B ä½¿ç”¨çš„æ˜¯æ—§çš„å…¬é’¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å°†ä¿®æ”¹åçš„æºä»£ç å®Œæ•´å¤åˆ¶åˆ°æœºå™¨ B
scp -r /workspaces/unioffice user@machine-b:/opt/

# æˆ–è€…ç¡®ä¿ä½¿ç”¨ç›¸åŒçš„ä»£ç ä»“åº“
```

### åœºæ™¯ 3: ä½¿ç”¨äº†è¿œç¨‹ä»“åº“

```bash
# go.mod ä¸­æ²¡æœ‰ replace æŒ‡ä»¤
# ç¨‹åºä½¿ç”¨è¿œç¨‹ä»“åº“çš„ä»£ç ï¼ˆå…¬é’¥æœªä¿®æ”¹ï¼‰

go run verify_license.go -license license.key -customer "User"
# è¾“å‡º: âŒ crypto/rsa: verification error
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# åœ¨ go.mod ä¸­æ·»åŠ 
replace github.com/unidoc/unioffice/v2 => ../

# æˆ–è€…æŒ‡å‘æœ¬åœ°è·¯å¾„
replace github.com/unidoc/unioffice/v2 => /workspaces/unioffice
```

---

## âœ… æ ‡å‡†æ“ä½œæµç¨‹ (SOP)

### ç”Ÿæˆæ–°å¯†é’¥å¯¹ï¼ˆä»…é¦–æ¬¡ï¼‰

```bash
cd /workspaces/unioffice/test

# 1. ç”Ÿæˆå¯†é’¥å¯¹
go run license_gen.go -genkeys -privkey master_private.pem -pubkey master_public.pem

# 2. å¤‡ä»½å¯†é’¥
cp master_private.pem /secure/backup/master_private_$(date +%Y%m%d).pem
chmod 400 /secure/backup/master_private_*.pem

# 3. å¤åˆ¶å…¬é’¥åå…­è¿›åˆ¶è¾“å‡ºï¼ˆæ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼‰
# ç¤ºä¾‹è¾“å‡º:
# const _dba = "\u002d\u002d\u002d..."

# 4. æ›¿æ¢æºä»£ç 
# ç¼–è¾‘ internal/license/license.go
# å°†ç¬¬ 881 è¡Œçš„ const _dba æ›¿æ¢ä¸ºæ–°çš„å€¼

# 5. éªŒè¯æ›¿æ¢
grep "const _dba" ../internal/license/license.go

# 6. æµ‹è¯•
go run license_gen.go -customer "Test" -privkey master_private.pem
go run verify_license.go -license license.key -customer "Test"
```

### æ—¥å¸¸ç”Ÿæˆè®¸å¯è¯

```bash
cd /workspaces/unioffice/test

# ä½¿ç”¨æ­£ç¡®çš„ç§é’¥
go run license_gen.go \
  -customer "å®¢æˆ·åç§°" \
  -output licenses/customer_$(date +%Y%m%d).key \
  -privkey master_private.pem  # âš ï¸ ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç§é’¥æ–‡ä»¶å
```

### éƒ¨ç½²åˆ°æ–°æœºå™¨

```bash
# 1. ä¼ è¾“æºä»£ç 
scp -r /workspaces/unioffice user@target:/opt/

# 2. ä¼ è¾“ç§é’¥ï¼ˆåŠ å¯†ä¼ è¾“ï¼‰
tar czf - master_private.pem | gpg -c | ssh user@target 'cat > /tmp/key.tar.gz.gpg'
ssh user@target 'gpg -d /tmp/key.tar.gz.gpg | tar xzf - -C /opt/keys/'

# 3. ä¼ è¾“ç”Ÿæˆå™¨
scp test/license_gen.go user@target:/opt/tools/

# 4. åœ¨ç›®æ ‡æœºå™¨ä¸Šæµ‹è¯•
ssh user@target << 'ENDSSH'
cd /opt/tools
go run license_gen.go -customer "TestTarget" -privkey /opt/keys/master_private.pem
cd /opt
cat > test.go << 'EOF'
package main
import ("os"; "fmt"; "github.com/unidoc/unioffice/v2/common/license")
func main() {
    data, _ := os.ReadFile("/opt/tools/license.key")
    err := license.SetLicenseKey(string(data), "TestTarget")
    if err != nil { fmt.Printf("âŒ %v\n", err); os.Exit(1) }
    fmt.Println("âœ… éªŒè¯æˆåŠŸ!")
}
EOF
cat > go.mod << 'EOF'
module test
go 1.21
replace github.com/unidoc/unioffice/v2 => ./unioffice
require github.com/unidoc/unioffice/v2 v2.0.0
EOF
go run test.go
ENDSSH
```

---

## ğŸ”§ é—®é¢˜è¯Šæ–­å·¥å…·

### è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬

```bash
#!/bin/bash
# verify_keys.sh - å¯†é’¥å¯¹éªŒè¯å·¥å…·

set -e

echo "ğŸ” UniOffice å¯†é’¥å¯¹éªŒè¯å·¥å…·"
echo "=============================="
echo ""

# æ£€æŸ¥ç§é’¥æ–‡ä»¶
echo "ğŸ“ æ£€æŸ¥ç§é’¥æ–‡ä»¶..."
if [ ! -f "new_private.pem" ]; then
    echo "âŒ new_private.pem ä¸å­˜åœ¨"
    exit 1
fi
echo "âœ… new_private.pem å­˜åœ¨"

# æ£€æŸ¥å…¬é’¥æ–‡ä»¶
echo "ğŸ“ æ£€æŸ¥å…¬é’¥æ–‡ä»¶..."
if [ ! -f "new_public_pem.pem" ]; then
    echo "âŒ new_public_pem.pem ä¸å­˜åœ¨"
    exit 1
fi
echo "âœ… new_public_pem.pem å­˜åœ¨"

# æ£€æŸ¥æºä»£ç 
echo "ğŸ“ æ£€æŸ¥æºä»£ç ..."
if [ ! -f "../internal/license/license.go" ]; then
    echo "âŒ ../internal/license/license.go ä¸å­˜åœ¨"
    exit 1
fi
echo "âœ… license.go å­˜åœ¨"

# ç”Ÿæˆæµ‹è¯•è®¸å¯è¯
echo ""
echo "ğŸ”¨ ç”Ÿæˆæµ‹è¯•è®¸å¯è¯..."
go run license_gen.go -customer "KeyValidation" -output /tmp/test_key.key -privkey new_private.pem
echo "âœ… è®¸å¯è¯ç”ŸæˆæˆåŠŸ"

# éªŒè¯è®¸å¯è¯
echo ""
echo "ğŸ” éªŒè¯è®¸å¯è¯..."
cat > /tmp/verify_test.go << 'EOF'
package main
import ("os"; "fmt"; "github.com/unidoc/unioffice/v2/common/license")
func main() {
    data, err := os.ReadFile("/tmp/test_key.key")
    if err != nil { panic(err) }
    err = license.SetLicenseKey(string(data), "KeyValidation")
    if err != nil {
        fmt.Printf("âŒ éªŒè¯å¤±è´¥: %v\n", err)
        os.Exit(1)
    }
    fmt.Println("âœ… éªŒè¯æˆåŠŸ!")
}
EOF

cat > /tmp/go.mod << 'EOF'
module verify-test
go 1.21
replace github.com/unidoc/unioffice/v2 => ../
require github.com/unidoc/unioffice/v2 v2.0.0
EOF

cd /tmp
go run verify_test.go

echo ""
echo "=============================="
echo "âœ… å¯†é’¥å¯¹éªŒè¯é€šè¿‡ï¼"
echo "=============================="
echo ""
echo "å¯†é’¥é…å¯¹å…³ç³»ï¼š"
echo "  ç§é’¥: new_private.pem"
echo "  å…¬é’¥: new_public_pem.pem"
echo "  æºä»£ç : ../internal/license/license.go (const _dba)"
echo ""
echo "âœ… å¯ä»¥å®‰å…¨ä½¿ç”¨æ­¤å¯†é’¥å¯¹ç”Ÿæˆè®¸å¯è¯"
```

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
cd /workspaces/unioffice/test
chmod +x verify_keys.sh
./verify_keys.sh
```

---

## ğŸ“š å¯†é’¥ç®¡ç†æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ

```bash
# æ¨èçš„å‘½åæ–¹å¼
master_private.pem       # ä¸»ç§é’¥
master_public.pem        # ä¸»å…¬é’¥
master_private_backup_20251214.pem  # å¤‡ä»½ï¼ˆå¸¦æ—¥æœŸï¼‰

# é¿å…æ··æ·†çš„å‘½å
private.pem              # å¤ªé€šç”¨
my_key.pem               # ä¸æ˜ç¡®
new_key.pem              # ä¸æ˜ç¡®
```

### 2. ç›®å½•ç»“æ„

```bash
/opt/unioffice-license/
â”œâ”€â”€ keys/                      # å¯†é’¥ç›®å½•
â”‚   â”œâ”€â”€ master_private.pem     # ä¸»ç§é’¥ (chmod 400)
â”‚   â”œâ”€â”€ master_public.pem      # ä¸»å…¬é’¥
â”‚   â””â”€â”€ backups/               # å¤‡ä»½ç›®å½•
â”‚       â”œâ”€â”€ master_private_20251201.pem.gpg
â”‚       â””â”€â”€ master_private_20251214.pem.gpg
â”œâ”€â”€ tools/                     # å·¥å…·ç›®å½•
â”‚   â”œâ”€â”€ license_gen.go         # ç”Ÿæˆå™¨
â”‚   â””â”€â”€ verify_license.go      # éªŒè¯å·¥å…·
â”œâ”€â”€ source/                    # æºä»£ç 
â”‚   â””â”€â”€ unioffice/
â”‚       â””â”€â”€ internal/license/
â”‚           â””â”€â”€ license.go     # åŒ…å«å…¬é’¥
â””â”€â”€ licenses/                  # ç”Ÿæˆçš„è®¸å¯è¯
    â”œâ”€â”€ customer1_20251214.key
    â””â”€â”€ customer2_20251214.key
```

### 3. ç‰ˆæœ¬æ§åˆ¶

```bash
# .gitignore
*.pem          # æ‰€æœ‰ç§é’¥
*.key          # æ‰€æœ‰è®¸å¯è¯
keys/          # å¯†é’¥ç›®å½•
backups/       # å¤‡ä»½ç›®å½•

# åªæäº¤
license_gen.go      # ç”Ÿæˆå™¨ä»£ç 
verify_license.go   # éªŒè¯ä»£ç 
*.md               # æ–‡æ¡£
```

### 4. æ–‡æ¡£è®°å½•

```bash
# keys/README.md
# å¯†é’¥å¯¹ä¿¡æ¯

- ç”Ÿæˆæ—¥æœŸ: 2025-12-14
- ç®—æ³•: RSA-2048
- æ ¼å¼: PKCS#1 (ç§é’¥), PKIX (å…¬é’¥)
- ç”¨é€”: UniOffice è®¸å¯è¯ç­¾å

æ–‡ä»¶æ¸…å•:
- master_private.pem: ä¸»ç§é’¥ï¼ˆä¸¥æ ¼ä¿å¯†ï¼‰
- master_public.pem: ä¸»å…¬é’¥ï¼ˆå·²éƒ¨ç½²åˆ°æºä»£ç ï¼‰

éƒ¨ç½²ä½ç½®:
- æºä»£ç : internal/license/license.go:881 (const _dba)

å¤‡ä»½ä½ç½®:
- /secure/backups/keys/
- AWS S3: s3://secure-bucket/unioffice-keys/

è”ç³»äºº: security@company.com
```

---

## ğŸ¯ å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

```bash
# ä¸€è¡Œå‘½ä»¤æ£€æŸ¥æ‰€æœ‰å…³é”®ç‚¹
cd /workspaces/unioffice/test && \
echo "1. ç§é’¥:" && ls -lh new_private.pem && \
echo "2. å…¬é’¥:" && ls -lh new_public_pem.pem && \
echo "3. æºä»£ç å…¬é’¥:" && grep -c "const _dba" ../internal/license/license.go && \
echo "4. æµ‹è¯•ç”Ÿæˆ:" && go run license_gen.go -customer "QuickTest" -output /tmp/qt.key -privkey new_private.pem && \
echo "5. æµ‹è¯•éªŒè¯:" && go run verify_license.go -license /tmp/qt.key -customer "QuickTest" && \
echo "âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼"
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0  
**æœ€åæ›´æ–°**: 2025-12-14  
**çŠ¶æ€**: âœ… å·²éªŒè¯  
**ç»´æŠ¤è€…**: License Team
